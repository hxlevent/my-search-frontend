<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì´ë²¤íŠ¸ ë°ì´í„° ì¡°íšŒ</title>
  <style>
/* ë°”ë””/ì»¨í…Œì´ë„ˆ */
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0;padding:16px;background:#f4f7f9;color:#333}
.container{max-width:1100px;margin:24px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.06)}

/* ì œëª©/íƒ­ */
h1{margin:0 0 12px;color:#2c3e50;font-size:22px}
.tabs{display:flex;flex-wrap:wrap;border-bottom:1px solid #e5e7eb;margin-bottom:12px;gap:6px}
.tab{padding:10px 14px;cursor:pointer;border-radius:8px 8px 0 0;font-size:14px}
.tab.active{background:#eaf3ff;color:#1f6feb;border:1px solid #cfe3ff;border-bottom-color:#eaf3ff}
.tabpanel{display:none}
.tabpanel.active{display:block}

/* ì…ë ¥í–‰ */
.row{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:10px;margin-bottom:12px}
input,select{padding:10px;font-size:14px;border:1px solid #d1d5db;border-radius:8px;width:100%}
.btn{padding:10px 14px;background:#3498db;color:#fff;border:0;border-radius:8px;cursor:pointer}
.btn:hover{background:#2980b9}
.meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px;color:#666;font-size:13px;gap:8px}
.tag{background:#eef6ff;color:#1f6feb;border:1px solid #d0e7ff;border-radius:999px;padding:4px 10px;font-size:12px}
.error{color:#d91e18}
.center{text-align:center}
.strong{font-weight:600}

/* í…Œì´ë¸” + ë˜í¼(ê°€ë¡œ ìŠ¤í¬ë¡¤) */
.table-wrap{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}
table{width:100%;border-collapse:collapse;margin-top:10px;font-size:14px;min-width:640px}
th,td{border:1px solid #eee;padding:10px;text-align:left;white-space:nowrap}
th{background:#f6f8fa}
tr:nth-child(even){background:#fafafa}

/* ë°˜ì‘í˜• */
@media (max-width: 900px){
  .row{grid-template-columns:1fr 1fr;grid-auto-rows:auto}
  .row .btn{grid-column:1/-1}
}
@media (max-width: 600px){
  body{padding:10px}
  .container{margin:10px auto;padding:14px}
  h1{font-size:18px}
  .row{grid-template-columns:1fr;gap:8px}
  .tab{font-size:13px}
  table{min-width:520px}
  input,select,.btn{font-size:15px;padding:12px}
}

  </style>
</head>
<body>
  <div class="container">
    <h1>ì´ë²¤íŠ¸ ë°ì´í„° ì¡°íšŒ</h1>

    <div class="tabs">
      <div class="tab active" data-tab="uid">ê³ ìœ ë²ˆí˜¸ ê²€ìƒ‰</div>
      <div class="tab" data-tab="serial">ì‹œë¦¬ì–¼ ê²€ìƒ‰</div>
    </div>

    <!-- ê³ ìœ ë²ˆí˜¸ ê²€ìƒ‰ íƒ­ -->
    <div id="panel-uid" class="tabpanel active">
      <div class="row">
        <input id="uidInput" placeholder="ê³ ìœ ë²ˆí˜¸(unique_id)" />
        <button class="btn" onclick="searchByUID()">ê²€ìƒ‰</button>
      </div>
      <div class="meta">
        <div id="loader">ê²€ìƒ‰ ì¤‘â€¦ <span id="timer">0.0</span>ì´ˆ</div>
        <div>
          <span class="tag" id="pageInfo">page 1</span>
          <button class="btn" onclick="prevPage()">â—€</button>
          <button class="btn" onclick="nextPage()">â–¶</button>
          <select id="limitSel" onchange="changeLimit()">
            <option>50</option><option>100</option><option>200</option><option selected>200</option>
          </select>
        </div>
      </div>
      <div id="uidResults"></div>
    </div>

    <!-- ì‹œë¦¬ì–¼ ê²€ìƒ‰ íƒ­ (ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥) -->
    <div id="panel-serial" class="tabpanel">
      <div class="row">
        <input id="serialInput" placeholder="ì‹œë¦¬ì–¼ë²ˆí˜¸ ì •í™•íˆ ì…ë ¥" />
        <input id="serialDateFrom" placeholder="ì‹œì‘ì¼ì YYYY.MM.DD (ì„ íƒ)" />
        <input id="serialDateTo" placeholder="ì¢…ë£Œì¼ì YYYY.MM.DD (ì„ íƒ)" />
        <button class="btn" onclick="searchBySerial()">ê²€ìƒ‰</button>
      </div>
      <div id="serialInfo" class="tag" style="display:none;"></div>
      <div id="serialResults"></div>
    </div>
  </div>

  <script>
    /* ===== í™˜ê²½ì„¤ì • ===== */
    // â˜… ì—¬ê¸°ë§Œ ë„¤ ë°±ì—”ë“œ ë„ë©”ì¸ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”
    const baseUrl   = 'https://my-search-backend.onrender.com';
    const apiSearch = `${baseUrl}/search`;         // unique_id ê²€ìƒ‰ (ë°°ì—´ ë°˜í™˜)
    const apiSerial = `${baseUrl}/search-serial`;  // ì‹œë¦¬ì–¼ ê²€ìƒ‰

    /* ===== ê³µí†µ ìœ í‹¸ ===== */
    let timerInterval; 
    let state = { page:1, limit:200, lastData:null, dupData:[] };
    
    function wrapTable(html){ return `<div class="table-wrap">${html}</div>`; }
    function qs(id){ return document.getElementById(id); }
    function escapeHtml(x){ return String(x).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#039;'); }
    function startTimer(){ let s=Date.now(); qs('timer').textContent='0.0'; qs('loader').style.display='block'; timerInterval=setInterval(()=>{ qs('timer').textContent=((Date.now()-s)/1000).toFixed(1); },100);} 
    function stopTimer(){ clearInterval(timerInterval); qs('loader').style.display='none'; }

    // ë‚ ì§œ ë²”ìœ„ë¥¼ "YYYY.MM.DD" ë°°ì—´ë¡œ ìƒì„±
    function getDateRange(startStr, endStr) {
      const toDate = (s) => { const [Y, M, D] = s.split('.').map(Number); return new Date(Y, M - 1, D); };
      const fmt = (d) => { const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); const day=String(d.getDate()).padStart(2,'0'); return `${y}.${m}.${day}`; };
      const res = []; let cur = toDate(startStr); const end = toDate(endStr);
      while (cur <= end) { res.push(fmt(cur)); cur.setDate(cur.getDate() + 1); }
      return res;
    }
    // "YYYY.MM.DD" â†’ "M/D"
    function toMD(dateStr) { const parts = dateStr.split('.').map(Number); return `${parts[1]}/${parts[2]}`; }
    // "H:MM"/"HH:MM" â†’ ë¶„
    function timeToMinutes(t) { if (!t) return null; const [h,m] = t.split(':').map(Number); if (Number.isNaN(h)||Number.isNaN(m)) return null; return h*60+m; }

    /* ===== íƒ­ ì „í™˜ ===== */
    document.querySelectorAll('.tab').forEach(t=>{
      t.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
        document.querySelectorAll('.tabpanel').forEach(x=>x.classList.remove('active'));
        t.classList.add('active'); qs('panel-'+t.dataset.tab).classList.add('active');
      });
    });

    /* ===== ê³ ìœ ë²ˆí˜¸ ê²€ìƒ‰ ===== */
    function buildUIDUrl(page=null){
  const u = new URL(apiSearch);
  const idRaw = qs('uidInput').value.trim();
  if(!idRaw){ 
    alert('ê³ ìœ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); 
    return null; 
  }

  const id = idRaw.toUpperCase();   // ğŸ”‘ ì—¬ê¸°ì„œ ëŒ€ë¬¸ìë¡œ ë³€í™˜
  const df = qs('uidDateFrom').value.trim();
  const dt = qs('uidDateTo').value.trim();

  u.searchParams.set('unique_id', id);
  u.searchParams.set('page', page ?? state.page);
  u.searchParams.set('limit', state.limit);
  if(df) u.searchParams.set('date_from', df);
  if(dt) u.searchParams.set('date_to', dt);
  return u;
}


    async function searchByUID(page=null){
      const url = buildUIDUrl(page); if(!url) return;
      state.page = Number(url.searchParams.get('page'));
      state.limit= Number(url.searchParams.get('limit'));
      qs('limitSel').value = String(state.limit);
      qs('pageInfo').textContent = `page ${state.page}`;

      try{
        startTimer();
        const res = await fetch(url, {mode:'cors'});
        if(!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜');
        const data = await res.json(); // ë°°ì—´
        stopTimer(); state.lastData = data; renderUIDTable(data);
      }catch(e){
        stopTimer(); qs('uidResults').innerHTML = `<p class="error">ì˜¤ë¥˜: ${escapeHtml(e.message)}</p>`;
      }
    }

    function prevPage(){ if(state.page>1) searchByUID(state.page-1); }
    function nextPage(){ searchByUID(state.page+1); }
    function changeLimit(){ state.limit = Number(qs('limitSel').value || 200); state.page=1; searchByUID(1); }
    ['uidInput','uidDateFrom','uidDateTo'].forEach(id=>qs(id).addEventListener('keydown',e=>{ if(e.key==='Enter') searchByUID(1); }));

    // â˜… ìš”ì•½+ìƒì„¸ 2ë‹¨ í…Œì´ë¸” ë Œë” (ìš”êµ¬ì‚¬í•­ ë°˜ì˜: 25ì¼ 1ì°¨/ìƒë°© ë¶„ë¦¬, ê°œê·¼ o/x)
   function renderUIDTable(rows){
  const wrap = qs('uidResults');
  if (!rows || rows.length === 0) { wrap.innerHTML = '<p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'; return; }

  // 1) ë‚ ì§œ ë²”ìœ„ (ì—†ìœ¼ë©´ ê¸°ë³¸ 9/19 ~ 9/25)
  const df = qs('uidDateFrom').value.trim() || '2025.09.19';
  const dt = qs('uidDateTo').value.trim()   || '2025.09.25';
  const days = getDateRange(df, dt);

  // 2) ë‚ ì§œë³„ ê±´ìˆ˜ + 9/25 íŠ¹ìˆ˜ ë¶„ë¦¬
  const counts = Object.fromEntries(days.map(d => [d, 0]));
  let count25_first = 0; // 00:00~09:59
  let countLive     = 0; // 12:00~23:59
  const day25 = days.find(d => d.endsWith('.09.25')); // ë²”ìœ„ì— 25ì¼ í¬í•¨ì‹œ ë¶„ë¦¬

  rows.forEach(r => {
    const d = r['ë‚ ì§œ']; const t = r['ì‹œê°„'];
    if (!d || !Object.prototype.hasOwnProperty.call(counts, d)) return;
    if (day25 && d === day25) {
      const mins = timeToMinutes(t);
      if (mins !== null) {
        if (mins <= 9*60 + 59)      count25_first += 1;  // 25ì¼(1ì°¨)
        else if (mins >= 12*60)     countLive += 1;      // ìƒë°©
        // 10:00~11:59ëŠ” ìš”ì•½ ë¯¸ë°˜ì˜(ìƒì„¸ì—” ê·¸ëŒ€ë¡œ)
      }
    } else {
      counts[d] += 1; // ì¼ë°˜ ë‚ ì§œ ì¹´ìš´íŠ¸
    }
  });

  // 3) ìš”ì•½ í‘œ (ì›ë³¸ ë°ì´í„° ê¸°ì¤€, ì½ê¸°ì „ìš©)
  const headerLabels = [];
  const headerKeys   = [];
  days.forEach(d => {
    if (day25 && d === day25) {
      headerLabels.push(toMD(d) + '(1ì°¨)'); headerKeys.push(d + '_first');
      headerLabels.push('ìƒë°©');            headerKeys.push(d + '_live');
    } else {
      headerLabels.push(toMD(d));           headerKeys.push(d);
    }
  });
  const summaryCells = headerKeys.map(key => {
    if (key.endsWith('_first')) return count25_first;
    if (key.endsWith('_live'))  return countLive;
    return counts[key] ?? 0;
  });

  // ê°œê·¼(ì›ë³¸ ê¸°ì¤€) â€” ì°¸ê³ ìš©
  let perfectOriginal = true;
  const days_19_24 = days.filter(d => !(day25 && d === day25));
  for (const d of days_19_24) if ((counts[d] || 0) < 1) { perfectOriginal = false; break; }
  if (day25 && count25_first < 1) perfectOriginal = false;

  let summary = '<table><thead><tr><th style="min-width:110px">ì°¸ì—¬ ìš”ì•½(ì›ë³¸)</th>';
  headerLabels.forEach(lbl => { summary += `<th>${lbl}</th>`; });
  summary += '</tr></thead><tbody>';
  summary += `<tr><td>ê±´ìˆ˜</td>${summaryCells.map(c => `<td class="center">${c}</td>`).join('')}</tr>`;
  summary += `<tr><td>ê°œê·¼(ì›ë³¸)</td><td colspan="${headerLabels.length}" class="center strong">${perfectOriginal ? 'o' : 'x'}</td></tr>`;
  summary += '</tbody></table>';

  // 4) ìˆ˜ì • ê°€ëŠ¥ íŒ¨ë„ (ì´ ë¶€ë¶„ì´ ìƒˆë¡œ ì¶”ê°€ë˜ëŠ” í•µì‹¬)
  const editableHTML = renderEditPanel({
    days, day25,
    baseCounts: counts,
    base25First: count25_first,
    baseLive: countLive
  });

  // 5) ìƒì„¸ í‘œ (ê¸°ì¡´)
  let detail = '<table style="margin-top:12px"><thead><tr>' +
    '<th>ê³ ìœ ë²ˆí˜¸</th><th>ë‚ ì§œ</th><th>ì‹œê°„</th><th>ì¸ì¦ìƒ· ì‹œë¦¬ì–¼ë„˜ë²„</th>' +
    '</tr></thead><tbody>';
  rows.forEach(r => {
    const serial = r['ì¸ì¦ìƒ· ì‹œë¦¬ì–¼ë„˜ë²„'] ?? r['ì¸ì¦ìƒ·ì‹œë¦¬ì–¼ë„˜ë²„'] ?? '';
    detail += `<tr>
      <td>${escapeHtml(r.unique_id ?? '')}</td>
      <td>${escapeHtml(r['ë‚ ì§œ'] ?? '')}</td>
      <td>${escapeHtml(r['ì‹œê°„'] ?? '')}</td>
      <td>${escapeHtml(serial)}</td>
    </tr>`;
  });
  detail += '</tbody></table>';

     wrap.innerHTML = wrapTable(summary) + wrapTable(editableHTML)+ wrapTable(detail);
}

    /* ===== ì‹œë¦¬ì–¼ ê²€ìƒ‰ (ê·¸ëŒ€ë¡œ) ===== */
    async function searchBySerial(){
      const serial = qs('serialInput').value.trim();
      const df = qs('serialDateFrom').value.trim();
      const dt = qs('serialDateTo').value.trim();
      if(!serial){ alert('ì‹œë¦¬ì–¼ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); return; }
      const u = new URL(apiSerial);
      u.searchParams.set('serial', serial);
      if(df) u.searchParams.set('date_from', df);
      if(dt) u.searchParams.set('date_to', dt);
      qs('serialInfo').style.display='none';
      qs('serialResults').innerHTML = 'ì¡°íšŒ ì¤‘â€¦';
      try{
        const res = await fetch(u, {mode:'cors'});
        if(!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜');
        const arr = await res.json();
        renderSerial(arr);
        qs('serialInfo').textContent = `${serial} Â· ${arr.length}ê±´`;
        qs('serialInfo').style.display='inline-block';
      }catch(e){
        qs('serialResults').innerHTML = `<p class="error">ì˜¤ë¥˜: ${escapeHtml(e.message)}</p>`;
      }
    }

    function renderSerial(rows){
      const div = qs('serialResults');
      if(!rows || rows.length===0){ div.innerHTML='<p>í•´ë‹¹ ì‹œë¦¬ì–¼ë²ˆí˜¸ë¡œ ì¡°íšŒëœ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'; return; }
      const byUID = {};
      rows.forEach(r=>{ const k = r.unique_id || '(unknown)'; (byUID[k] ||= []).push(r); });
      let html = '<table><thead><tr><th>ê³ ìœ ë²ˆí˜¸</th><th>ë‚ ì§œÂ·ì‹œê°„ ëª©ë¡</th></tr></thead><tbody>';
      Object.keys(byUID).sort().forEach(uid=>{
        const lines = byUID[uid].map(r=> `${escapeHtml(r['ë‚ ì§œ']||'')} ${escapeHtml(r['ì‹œê°„']||'')}`).join('<br/>');
        html += `<tr><td>${escapeHtml(uid)}</td><td>${lines}</td></tr>`;
      });
      html += '</tbody></table>';
      div.innerHTML = wrapTable(html);

    }
    // ìˆ˜ì • ê°€ëŠ¥í•œ ì§‘ê³„ í…Œì´ë¸” + ë©”ì‹œì§€ ì˜ì—­ ë Œë”
function renderEditPanel({ days, day25, baseCounts, base25First, baseLive }) {
  // 9/19~24 ê³ ì • ë¼ë²¨ ë§Œë“¤ê¸° (ìš”êµ¬ í…œí”Œë¦¿ì´ ì´ êµ¬ê°„ ê¸°ì¤€ì´ê¸° ë•Œë¬¸)
  const targetDays = ['2025.09.19','2025.09.20','2025.09.21','2025.09.22','2025.09.23','2025.09.24'];
  const values = {};
  targetDays.forEach(d => { values[d] = (d in baseCounts) ? baseCounts[d] : 0; });
  const v25 = base25First || 0;
  const vLive = baseLive || 0;

  // ì…ë ¥ í…Œì´ë¸”
  let html = `
  <div style="margin-top:16px">
    <h3 style="margin:6px 0 4px; color:#2c3e50;">ê°’ ìˆ˜ì • & ë©”ì‹œì§€ ìƒì„±</h3>
    <table>
      <thead>
        <tr>
          <th>9/19</th><th>9/20</th><th>9/21</th><th>9/22</th><th>9/23</th><th>9/24</th>
          <th>9/25(1ì°¨)</th><th>ìƒë°©</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          ${targetDays.map(d => `<td class="center"><input type="number" min="0" id="edit_${d}" value="${values[d]}" style="width:70px;text-align:center;"></td>`).join('')}
          <td class="center"><input type="number" min="0" id="edit_25_first" value="${v25}" style="width:90px;text-align:center;"></td>
          <td class="center"><input type="number" min="0" id="edit_live" value="${vLive}" style="width:90px;text-align:center;"></td>
        </tr>
      </tbody>
    </table>

    <div class="meta" style="margin-top:8px">
      <div id="editedInfo" class="tag">í•©ê³„/ê°œê·¼ ê³„ì‚° ì¤‘â€¦</div>
      <div>
        <button class="btn" onclick="generateMessage()">ë©”ì‹œì§€ ìƒì„±</button>
        <button class="btn" onclick="copyMessage()">ë³µì‚¬</button>
      </div>
    </div>

    <textarea id="messageBox" rows="10" style="width:100%; margin-top:8px; font-family:inherit;"></textarea>
  </div>`;

  // ë Œë” í›„ í•©ê³„ ê°±ì‹  ì´ë²¤íŠ¸ ì—°ê²°
  setTimeout(() => {
    [...targetDays.map(d=>`edit_${d}`), 'edit_25_first','edit_live'].forEach(id=>{
      const el = qs(id); if (el) el.addEventListener('input', updateEditedSummary);
    });
    updateEditedSummary(); // ìµœì´ˆ 1íšŒ ê³„ì‚°
  });

  return html;
}

// ì…ë ¥ê°’ ì½ê¸°
function getEditedCounts() {
  const d = k => Math.max(0, Number(qs(k)?.value || 0) | 0);
  const val = {
    '2025.09.19': d('edit_2025.09.19'),
    '2025.09.20': d('edit_2025.09.20'),
    '2025.09.21': d('edit_2025.09.21'),
    '2025.09.22': d('edit_2025.09.22'),
    '2025.09.23': d('edit_2025.09.23'),
    '2025.09.24': d('edit_2025.09.24'),
    '25_first':   d('edit_25_first'),
    'live':       d('edit_live'),
  };
  return val;
}

// í•©ê³„/ê°œê·¼ í‘œì‹œ ê°±ì‹  (ìˆ˜ì •ê°’ ê¸°ì¤€)
function updateEditedSummary() {
  const v = getEditedCounts();
  const k = v['2025.09.19'] + v['2025.09.20'] + v['2025.09.21'] +
            v['2025.09.22'] + v['2025.09.23'] + v['2025.09.24'] +
            v['25_first']; // ì‚¬ì „ ëˆ„ì 
  const n = v['live'];     // ìƒë°©
  const perfect = [v['2025.09.19'],v['2025.09.20'],v['2025.09.21'],v['2025.09.22'],v['2025.09.23'],v['2025.09.24']].every(x=>x>=1) && v['25_first']>=1;
  const weight = perfect ? (n*8) : n;

  const txt = `ì‚¬ì „ í•©ê³„: ${k}ê±´ Â· ìƒë°©: ${n}ê±´ Â· ê°œê·¼: ${perfect ? 'o' : 'x'} Â· ê°€ì¤‘ì¹˜: ${weight}`;
  qs('editedInfo').textContent = txt;
}

// ë©”ì‹œì§€ ìƒì„± (ìˆ˜ì •ê°’ ê¸°ì¤€ìœ¼ë¡œ ë¬¸ìì—´ ë§Œë“¤ê¸°)
function generateMessage() {
  const uid = (qs('uidInput').value || '').trim().toUpperCase();
  const v = getEditedCounts();
  const a=v['2025.09.19'], b=v['2025.09.20'], c=v['2025.09.21'],
        d=v['2025.09.22'], e=v['2025.09.23'], f=v['2025.09.24'],
        g=v['25_first'],   n=v['live'];
  const k = a+b+c+d+e+f+g;
  const perfect = [a,b,c,d,e,f].every(x=>x>=1) && g>=1;
  const weight = perfect ? (n*8) : n;

  const msg =
`ê³ ìœ ë²ˆí˜¸ ë‹˜, ìµœì¢… ì§‘ê³„ ì•ˆë‚´ ë©”ì‹œì§€ì…ë‹ˆë‹¤.

ì‚¬ì „ íˆ¬í‘œ ì°¸ì—¬ë‚´ì—­(09.19 - 09.25 ì˜¤ì „)
19ì¼ - ${a}ê±´ 
20ì¼ - ${b}ê±´ 
21ì¼ - ${c}ê±´ 
22ì¼ - ${d}ê±´ 
23ì¼ - ${e}ê±´ 
24ì¼ - ${f}ê±´ 
25ì¼ - ${g}ê±´ 
ì‚¬ì „ íˆ¬í‘œê¸°ê°„ ì´ ëˆ„ì íˆ¬í‘œìˆ˜ : ${k}ê±´ 
ê³ ìœ ë²ˆí˜¸ ë‹˜ì€ ${perfect ? 'ê°œê·¼ì— í•´ë‹¹ë©ë‹ˆë‹¤.' : 'ê°œê·¼ì— í•´ë‹¹ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'}

ìƒë°© íˆ¬í‘œ ì°¸ì—¬ë‚´ì—­ì€ ${n}ê±´ì…ë‹ˆë‹¤.
ê°œê·¼ ì—¬ë¶€ì— ë”°ë¥¸ ìƒë°© ì´ë²¤íŠ¸ ì´ ê°€ì¤‘ì¹˜ëŠ” ${perfect ? `${n}â†’ 8Ã—${n} = ${weight}` : `${weight}`} ì…ë‹ˆë‹¤.`;

  qs('messageBox').value = msg.replaceAll('ê³ ìœ ë²ˆí˜¸', uid || 'ê³ ìœ ë²ˆí˜¸');
}

// ë³µì‚¬
function copyMessage(){
  const ta = qs('messageBox');
  ta.select(); ta.setSelectionRange(0, 99999);
  document.execCommand('copy');
  // UX ì•Œë¦¼ (ê°„ë‹¨)
  const prev = qs('editedInfo').textContent;
  qs('editedInfo').textContent = 'ë©”ì‹œì§€ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.';
  setTimeout(()=> qs('editedInfo').textContent = prev, 1500);
}
  </script>
</body>
</html>
